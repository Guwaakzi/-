æœ¬å·¥å…·ç”¨äºå¤„ç† MODIS çƒ­çº¢å¤–æ•°æ®ï¼Œæ”¯æŒä»¥ä¸‹æ•°æ®çš„è‡ªåŠ¨åŒ–å¤„ç†ï¼š

çƒ­çº¢å¤–æ³¢æ®µï¼š27ã€28ã€29ã€30ã€31ã€32 æ³¢æ®µ

å‘å°„ç‡æ•°æ®ï¼š31ã€32 æ³¢æ®µå‘å°„ç‡

åœ°è¡¨æ¸©åº¦æ•°æ®ï¼šLSTï¼ˆLand Surface Temperatureï¼‰

è´¨é‡æ§åˆ¶æ ‡è¯†ï¼šQCï¼ˆQuality Controlï¼‰

å¤„ç†åæ–‡ä»¶åŒ…å«ä»¥ä¸‹åˆ—æ•°æ®ï¼š
ç»åº¦ çº¬åº¦ TIR27 TIR28 TIR29 TIR30 TIR31 TIR32 å‘å°„ç‡31 å‘å°„ç‡32 LSTæ¸©åº¦ QCæ ‡è¯†

## ğŸ“‚ è¾“å…¥æ•°æ®ç»“æ„è¦æ±‚

### ç›®å½•ç»“æ„
```
æ•°æ®æ ¹ç›®å½•ï¼ˆå¦‚ï¼šdatatest/ï¼‰
â”œâ”€â”€ æ—¥æœŸç›®å½•ï¼ˆå¦‚ï¼š230806ï¼‰
â”‚   â”œâ”€â”€ day/
â”‚   â”‚   â”œâ”€â”€ LST/
â”‚   â”‚   â”‚   â””â”€â”€ *.hdfï¼ˆç¤ºä¾‹ï¼šMOD11A1.A20230806.h08v03.061.2023086233058.hdfï¼‰
â”‚   â”‚   â””â”€â”€ TIR/
â”‚   â”‚       â””â”€â”€ *.hdfï¼ˆç¤ºä¾‹ï¼šMOD021KM.A2023086.h08v03.061.2023086233058.hdfï¼‰
â”‚   â””â”€â”€ night/
â”‚       â”œâ”€â”€ LST/
â”‚       â””â”€â”€ TIR/
â””â”€â”€ å…¶ä»–æ—¥æœŸç›®å½•...
```

### æ–‡ä»¶å‘½åè§„èŒƒ
- æ—¥æœŸç›®å½•ï¼š8ä½æ•°å­—ï¼ˆç¤ºä¾‹ï¼š230806 è¡¨ç¤º 2023å¹´8æœˆ6æ—¥ï¼‰
- HDFæ–‡ä»¶ï¼šå¿…é¡»åŒ…å«ç›¸åŒçš„æ—¶é—´æˆ³æ ‡è¯†ï¼ˆç¤ºä¾‹ä¸­`.h08v03.061.2023086233058`ï¼‰
- åŒ¹é…è§„åˆ™ï¼šLSTå’ŒTIRæ–‡ä»¶æ—¶é—´æˆ³éœ€å®Œå…¨ä¸€è‡´

---

## ğŸ› ï¸ ç¯å¢ƒé…ç½®

### ä¾èµ–å®‰è£…
```bash
# åŸºç¡€ä¾èµ–
pip install numpy pandas pyyaml scipy tqdm

# GDALæ¨èé€šè¿‡condaå®‰è£…
conda install -c conda-forge gdal
```

### ç¯å¢ƒéªŒè¯
```bash
# æ£€æŸ¥GDALç‰ˆæœ¬
gdalinfo --version
# åº”è¾“å‡ºç±»ä¼¼ GDAL 3.6.4 çš„ç‰ˆæœ¬ä¿¡æ¯
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å•æ—¥æ•°æ®å¤„ç†
```python
from your_module import çŒ«è¿ªå¤§ç¥­å¸

# å¤„ç†æŒ‡å®šæ—¥æœŸæ•°æ®
çŒ«è¿ªå¤§ç¥­å¸().core(
    base_path='datatest',  # æ•°æ®æ ¹ç›®å½•
    date='230806'          # æ—¥æœŸç›®å½•å
)
```

### æ‰¹é‡å¤„ç†æ¨¡å¼
```python
# è‡ªåŠ¨å¤„ç†æ ¹ç›®å½•ä¸‹æ‰€æœ‰æ—¥æœŸ
çŒ«è¿ªå¤§ç¥­å¸().batch_core('datatest')
```

---

## ğŸ“‚ è¾“å‡ºç»“æ„

### ç”Ÿæˆç›®å½•ç»“æ„
```
proc_datatest/
â”œâ”€â”€ 230806/
â”‚   â”œâ”€â”€ day/
â”‚   â”‚   â””â”€â”€ æ—¶é—´æˆ³ç›®å½•ï¼ˆå¦‚ï¼š0820ï¼‰
â”‚   â”‚       â”œâ”€â”€ 0820.dat        # ENVIæ ¼å¼æ•°æ®æ–‡ä»¶
â”‚   â”‚       â”œâ”€â”€ 0820.hdr        # ENVIå¤´æ–‡ä»¶
â”‚   â”‚       â””â”€â”€ 0820.txt        # ä¸­é—´æ–‡æœ¬æ•°æ®
â”‚   â””â”€â”€ night/
â”œâ”€â”€ 230807/
â””â”€â”€ merged/
    â”œâ”€â”€ L_daycol.txt           # åˆå¹¶åçš„ç™½å¤©åŸå§‹æ•°æ®
    â”œâ”€â”€ L_nightcol.txt         # åˆå¹¶åçš„å¤œæ™šåŸå§‹æ•°æ®
    â”œâ”€â”€ bt_L_daycol.txt        # æœ€ç»ˆç™½å¤©äº®æ¸©æ•°æ®
    â””â”€â”€ bt_L_nightcol.txt      # æœ€ç»ˆå¤œæ™šäº®æ¸©æ•°æ®
```

### æ•°æ®æ–‡ä»¶è¯´æ˜
| æ–‡ä»¶å | æ ¼å¼ | å†…å®¹ç»“æ„ |
|-------|------|---------|
| `bt_L_*col.txt` | åˆ¶è¡¨ç¬¦åˆ†éš” | `ç»åº¦ çº¬åº¦ TIR27...TIR32äº®æ¸© å‘å°„ç‡31 å‘å°„ç‡32 LSTæ¸©åº¦ QCæ ‡è¯†` |
| `L_*col.txt` | åˆ¶è¡¨ç¬¦åˆ†éš” | ä¸­é—´æ•°æ®ï¼ŒåŒ…å«åŸå§‹è¾å°„å€¼ |

---

## ğŸ”„ å¤„ç†æµç¨‹
1. **æ–‡ä»¶åŒ¹é…**  
   - è‡ªåŠ¨è¯†åˆ«åŒæ—¶é—´æˆ³çš„LSTå’ŒTIRæ–‡ä»¶
   - åˆ›å»ºå¤„ç†ç›®å½•ï¼ˆ`proc_`å‰ç¼€ï¼‰

2. **æ•°æ®æŠ•å½±**  
   - å°†HDFè½¬æ¢ä¸ºENVIæ ¼å¼ï¼ˆWGS84åæ ‡ç³»ï¼‰
   - åˆ†è¾¨ç‡è‡ªåŠ¨è®¡ç®—ï¼ˆçº¦1kmï¼‰

3. **æ ¼å¼è½¬æ¢**  
   - ç”ŸæˆASCIIä¸­é—´æ–‡ä»¶
   - è¿‡æ»¤æ— æ•ˆæ•°æ®ï¼ˆQC=0çš„æœ‰æ•ˆæ•°æ®ï¼‰

4. **æ•°æ®åˆå¹¶**  
   - å¤šæ—¥æ•°æ®æ™ºèƒ½åˆå¹¶
   - åæ ‡é‡å¤æ—¶è‡ªåŠ¨å–å¹³å‡å€¼

5. **äº®æ¸©è½¬æ¢**  
   - ä½¿ç”¨Planckå…¬å¼è®¡ç®—äº®æ¸©ï¼š  
     ![BT Formula](https://latex.codecogs.com/png.latex?T%3D%5Cfrac%7Bhc%7D%7Bk%5Clambda%5Cln%5Cleft%28%5Cfrac%7B2hc%5E2%7D%7B%5Clambda%5E5L%7D&plus;1%5Cright%29%7D)

---

## ğŸš¨ å¸¸è§é—®é¢˜

### Q1: æ–‡ä»¶åŒ¹é…å¤±è´¥
**ç°è±¡**ï¼šæ—¥å¿—ä¸­æ˜¾ç¤º`No matching files`  
âœ… è§£å†³æ–¹æ¡ˆï¼š  
1. æ£€æŸ¥æ–‡ä»¶åæ—¶é—´æˆ³æ˜¯å¦ä¸€è‡´  
2. éªŒè¯æ–‡ä»¶è·¯å¾„æ˜¯å¦ç¬¦åˆè§„èŒƒ  
3. ç¡®ä¿HDFæ–‡ä»¶æœªè¢«æŸåï¼ˆå¯ç”¨GDALæ‰“å¼€éªŒè¯ï¼‰

### Q2: GDALåˆå§‹åŒ–é”™è¯¯
**ç°è±¡**ï¼š`RuntimeError: Unable to open dataset`  
âœ… è§£å†³æ–¹æ¡ˆï¼š  
```bash
# Linux/Mac
export GDAL_DATA=/path/to/anaconda3/share/gdal

# Windows
set GDAL_DATA=C:\path\to\anaconda3\Library\share\gdal
```

### Q3: åæ ‡ç²¾åº¦é—®é¢˜
**ç°è±¡**ï¼šåˆå¹¶åæ•°æ®é‡å¼‚å¸¸å‡å°‘  
âœ… å¤„ç†é€»è¾‘ï¼š  
- ç³»ç»Ÿé»˜è®¤ä¿ç•™2ä½å°æ•°ï¼ˆç»åº¦çº¬åº¦ï¼‰
- å¯é€šè¿‡ä¿®æ”¹æºç è°ƒæ•´ç²¾åº¦ï¼š  
```python
# åœ¨ ascii_to_column æ–¹æ³•ä¸­ä¿®æ”¹
lon_lat_fmt = ['%.2f', '%.2f']  # æ”¹ä¸º %.3f å¯æé«˜ç²¾åº¦
```

---

## âš™ï¸ é«˜çº§é…ç½®

### ä¿®æ”¹æŠ•å½±å‚æ•°
```python
# åœ¨ save_to_raster æ–¹æ³•ä¸­ä¿®æ”¹
target_srs = osr.SpatialReference()
target_srs.ImportFromEPSG(3857)  # æ”¹ä¸ºWebå¢¨å¡æ‰˜æŠ•å½±
```

### è°ƒæ•´äº®æ¸©è®¡ç®—
```python
# åœ¨ radiometric_to_bt æ–¹æ³•ä¸­ä¿®æ”¹
modis_wavelengths = np.array([...])  # è‡ªå®šä¹‰æ³¢æ®µå‚æ•°
emis_calibration = 0.002 * ... + 0.49  # å‘å°„ç‡è®¡ç®—å…¬å¼
```

---

## ğŸ“œ æ³¨æ„äº‹é¡¹
1. è·¯å¾„ä¸­è¯·é¿å…ä½¿ç”¨ä¸­æ–‡å’Œç©ºæ ¼
2. å»ºè®®ä½¿ç”¨SSDç¡¬ç›˜å¤„ç†å¤§æ•°æ®é‡
3. å¤œé—´æ•°æ®å¤„ç†è€—æ—¶çº¦ä¸ºç™½å¤©çš„1.5å€
4. æœ€ç»ˆè¾“å‡ºæ–‡ä»¶ç¼–ç ä¸ºUTF-8

---

> ğŸ“§ å¦‚æœ‰å…¶ä»–é—®é¢˜ï¼Œè¯·è”ç³»ï¼šyour_email@example.com  
> ğŸ”— é¡¹ç›®åœ°å€ï¼š[github.com/yourname/modis-processor](https://github.com/yourname/modis-processor)